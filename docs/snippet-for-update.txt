
Update could be _inside_ commander.
Allows cyber-dojo script to do just delegation.

$ ./cyber-dojo update [RELEASE]

#!/bin/bash
set -e
shift # update

RELEASE=${1:-latest}
IMAGE=cyberdojo/versioner
docker pull $IMAGE:$RELEASE
NUMBER=$(docker run --rm -i $IMAGE:$RELEASE sh -c 'echo -n $RELEASE')
docker tag $IMAGE:$RELEASE $IMAGE:$NUMBER
docker tag $IMAGE:$RELEASE $IMAGE:latest

# The two tag commands are because you can do
# 1) ./cyber-dojo update 2.3.0
# 2) ./cyber-dojo update latest
# And whichever one we do we need to create tags for 2.3.0 and latest
# remembering that latest is the default for RELEASE in the cyber-dojo script.
# This means each versioner image will need its RELEASE env-var inside itself.
